{
  "openapi": "3.0.0",
  "info": {
    "title": "Marzipan API",
    "version": "1.0.0"
  },
  "components": {
    "securitySchemes": {
      "tenantAuth": {
        "type": "http",
        "scheme": "bearer",
        "description": "Bearer authentication header of the form `Bearer <token>`, where `<token>` is your API token.",
        "bearerFormat": "JWT"
      },
      "accountAuth": {
        "type": "http",
        "scheme": "bearer",
        "description": "Bearer authentication header of the form `Bearer <token>`, where `<token>` is the account token returned from the `Login` endpoint."
      }
    },
    "schemas": {
      "Product": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the product"
          },
          "name": {
            "type": "string",
            "description": "Product name"
          },
          "slug": {
            "type": "string",
            "description": "URL-friendly product identifier"
          },
          "url": {
            "type": "string",
            "description": "Full URL to the product page"
          },
          "description": {
            "type": "string",
            "description": "Product description"
          },
          "product_type": {
            "type": "string",
            "enum": ["physical", "event", "subscription", "bundle"],
            "description": "Type of product"
          },
          "subscription_type": {
            "type": "string",
            "enum": ["picknmix", "variable"],
            "description": "Type of subscription. Only present for subscription products"
          },
          "sku": {
            "type": "string",
            "description": "Stock Keeping Unit"
          },
          "collections": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Collection"
            },
            "description": "Collections this product belongs to"
          },
          "status": {
            "type": "string",
            "enum": ["active", "inactive", "out_of_stock"],
            "description": "Product status - automatically set to out_of_stock when quantity is 0"
          },
          "images": {
            "type": "object",
            "properties": {
              "product": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/ProductImage"
                },
                "description": "Main product images"
              },
              "labels": {
                "type": "object",
                "properties": {
                  "front": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/ProductImage"
                    },
                    "description": "Front label images"
                  },
                  "back": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/ProductImage"
                    },
                    "description": "Back label images"
                  }
                }
              }
            },
            "description": "Product images organized by type"
          },
          "primaryImage": {
            "$ref": "#/components/schemas/ProductImage",
            "description": "Primary product image"
          },
          "price": {
            "type": "string",
            "description": "Formatted price (e.g., £10.00). For pick-and-mix subscriptions with per-item pricing, may show 'from £X.XX'"
          },
          "salePrice": {
            "type": "string",
            "nullable": true,
            "description": "Formatted sale price if on sale"
          },
          "subscriberPrice": {
            "type": "string",
            "nullable": true,
            "description": "Special price for subscribers. Not shown for subscription products"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp"
          },
          "store_slug": {
            "type": "string",
            "description": "Store URL slug"
          },
          "subscriptions_slug": {
            "type": "string",
            "description": "Subscriptions URL slug"
          },
          "availability": {
            "type": "string",
            "enum": ["all", "subscribers"],
            "description": "Product availability"
          },
          "upsell_products": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "description": "Product ID"
                },
                "name": {
                  "type": "string",
                  "description": "Product name"
                },
                "sku": {
                  "type": "string",
                  "description": "Product SKU"
                },
                "price": {
                  "type": "string",
                  "description": "Formatted price"
                },
                "sale_price": {
                  "type": "string",
                  "nullable": true,
                  "description": "Formatted sale price"
                },
                "subscriber_price": {
                  "type": "string",
                  "nullable": true,
                  "description": "Formatted subscriber price"
                }
              }
            },
            "description": "Upsell products with simplified data"
          },
          "linkedSubscriptions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/LinkedSubscription"
            },
            "description": "Full details of linked subscriptions. Only included when requested via the include query parameter."
          },
          "billing_frequency": {
            "type": "integer",
            "description": "Billing frequency in months. Only present for subscription products"
          },
          "billing_frequencies": {
            "type": "array",
            "items": {
              "type": "integer"
            },
            "description": "Available billing frequencies. Only present for subscription products"
          },
          "pricing_type": {
            "type": "string",
            "enum": ["fixed", "per_item"],
            "description": "Pricing type for subscriptions. Only present for subscription products"
          },
          "bundle_items": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Items included in bundle. Only present for bundle products"
          },
          "attributes": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Product attributes like color, size, etc."
          },
          "options": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Product options with their possible values"
          },
          "related_products": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Related products"
          },
          "awards": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Product awards"
          },
          "reviews": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Product reviews"
          },
          "meta_title": {
            "type": "string",
            "description": "SEO meta title"
          },
          "meta_description": {
            "type": "string",
            "description": "SEO meta description"
          },
          "meta_image": {
            "type": "string",
            "nullable": true,
            "description": "SEO meta image URL (1200x630)"
          },
          "linked_subscription": {
            "type": "boolean",
            "description": "Whether product has linked subscriptions. Only present if product has linked subscriptions"
          },
          "store_name": {
            "type": "string",
            "description": "Store name"
          }
        }
      },
      "ProductSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the product"
          },
          "name": {
            "type": "string",
            "description": "Product name"
          },
          "slug": {
            "type": "string",
            "description": "URL-friendly product identifier"
          },
          "price": {
            "type": "number",
            "format": "float",
            "description": "Product price"
          },
          "productType": {
            "type": "string",
            "enum": ["physical", "event", "subscription"],
            "description": "Type of product"
          }
        }
      },
      "ProductImage": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the image"
          },
          "path": {
            "type": "string",
            "description": "Relative path to the image file"
          },
          "src": {
            "type": "string",
            "format": "uri",
            "description": "Full URL to access the image"
          },
          "alt": {
            "type": "string",
            "nullable": true,
            "description": "Alternative text for accessibility"
          },
          "mimeType": {
            "type": "string",
            "description": "MIME type of the image (e.g., image/jpeg, image/png)"
          },
          "filename": {
            "type": "string",
            "description": "Original filename of the uploaded image"
          }
        }
      },
      "LinkedSubscription": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Subscription ID"
          },
          "name": {
            "type": "string",
            "description": "Subscription name"
          },
          "options": {
            "type": "object",
            "description": "Subscription options"
          },
          "status": {
            "type": "string",
            "description": "Subscription status"
          },
          "start_date": {
            "type": "string",
            "format": "date",
            "description": "Subscription start date"
          },
          "end_date": {
            "type": "string",
            "format": "date",
            "description": "Subscription end date"
          },
          "next_billing_date": {
            "type": "string",
            "format": "date",
            "description": "Next billing date"
          },
          "billing_interval": {
            "type": "integer",
            "description": "Billing interval in months"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          }
        }
      },
      "Collection": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the collection"
          },
          "name": {
            "type": "string",
            "description": "Collection name"
          },
          "description": {
            "type": "string",
            "description": "Collection description"
          },
          "slug": {
            "type": "string",
            "description": "URL-friendly collection identifier"
          },
          "attributes": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Collection attributes"
          }
        }
      },
      "SubscriptionPackage": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the subscription package"
          },
          "subscription_type": {
            "type": "string",
            "enum": ["picknmix", "variable"],
            "description": "Type of subscription package"
          },
          "name": {
            "type": "string",
            "description": "Package name"
          },
          "slug": {
            "type": "string",
            "description": "URL-friendly package identifier"
          },
          "sku": {
            "type": "string",
            "description": "Stock Keeping Unit"
          },
          "url": {
            "type": "string",
            "description": "Full URL to the package page"
          },
          "status": {
            "type": "string",
            "enum": ["active", "inactive", "out_of_stock"],
            "description": "Package status"
          },
          "availability": {
            "type": "string",
            "enum": ["all", "subscribers"],
            "description": "Who can purchase this package"
          },
          "product_type": {
            "type": "string",
            "enum": ["subscription"],
            "description": "Always 'subscription' for packages"
          },
          "description": {
            "type": "string",
            "description": "Package description"
          },
          "meta_title": {
            "type": "string",
            "description": "SEO meta title"
          },
          "meta_description": {
            "type": "string",
            "description": "SEO meta description"
          },
          "collections": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Collection"
            },
            "description": "Collections this package belongs to"
          },
          "images": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProductImage"
            },
            "description": "Package images"
          },
          "primaryImage": {
            "$ref": "#/components/schemas/ProductImage",
            "description": "Primary package image"
          },
          "price": {
            "type": "object",
            "properties": {
              "value": {
                "type": "integer",
                "description": "Price in cents"
              },
              "formatted": {
                "type": "string",
                "description": "Formatted price with currency"
              },
              "currency": {
                "type": "string",
                "description": "Currency code"
              }
            },
            "description": "Package price information"
          },
          "salePrice": {
            "type": "object",
            "nullable": true,
            "properties": {
              "value": {
                "type": "integer",
                "description": "Sale price in cents"
              },
              "formatted": {
                "type": "string",
                "description": "Formatted sale price with currency"
              },
              "currency": {
                "type": "string",
                "description": "Currency code"
              }
            },
            "description": "Sale price information if on sale"
          },
          "billing_frequency": {
            "type": "integer",
            "description": "Default billing frequency in months"
          },
          "billing_frequencies": {
            "type": "array",
            "items": {
              "type": "integer"
            },
            "description": "Available billing frequencies in months"
          },
          "pricing_type": {
            "type": "string",
            "enum": ["fixed", "per_item"],
            "description": "How the subscription is priced"
          },
          "auto_renew": {
            "type": "boolean",
            "description": "Whether the subscription auto-renews"
          },
          "minimum_items": {
            "type": "integer",
            "description": "Minimum number of items required for pick & mix"
          },
          "available_items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SubscriptionAvailableItem"
            },
            "description": "Available items for pick & mix subscriptions. Only present for picknmix type"
          },
          "attributes": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Package attributes"
          },
          "options": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Package options"
          },
          "related_products": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Related products"
          },
          "subscribers": {
            "type": "integer",
            "description": "Number of subscribers. Only included when using ?include=subscribers parameter"
          }
        }
      },
      "SubscriptionPackageCollection": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the subscription package"
          },
          "subscription_type": {
            "type": "string",
            "enum": ["picknmix", "variable"],
            "description": "Type of subscription package"
          },
          "name": {
            "type": "string",
            "description": "Package name"
          },
          "slug": {
            "type": "string",
            "description": "URL-friendly package identifier"
          },
          "subscriptions_slug": {
            "type": "string",
            "description": "Subscriptions URL slug"
          },
          "url": {
            "type": "string",
            "description": "Full URL to the package page"
          },
          "description": {
            "type": "string",
            "description": "Package description"
          },
          "product_type": {
            "type": "string",
            "enum": ["subscription"],
            "description": "Always 'subscription' for packages"
          },
          "sku": {
            "type": "string",
            "description": "Stock Keeping Unit"
          },
          "collection": {
            "type": "string",
            "nullable": true,
            "description": "Primary collection name"
          },
          "status": {
            "type": "string",
            "enum": ["active", "inactive", "out_of_stock"],
            "description": "Package status"
          },
          "image": {
            "$ref": "#/components/schemas/ProductImage",
            "description": "Primary package image"
          },
          "price": {
            "type": "object",
            "properties": {
              "value": {
                "type": "integer",
                "description": "Price in cents"
              },
              "formatted": {
                "type": "string",
                "description": "Formatted price with currency"
              },
              "currency": {
                "type": "string",
                "description": "Currency code"
              }
            },
            "description": "Package price information"
          },
          "salePrice": {
            "type": "object",
            "nullable": true,
            "properties": {
              "value": {
                "type": "integer",
                "description": "Sale price in cents"
              },
              "formatted": {
                "type": "string",
                "description": "Formatted sale price with currency"
              },
              "currency": {
                "type": "string",
                "description": "Currency code"
              }
            },
            "description": "Sale price information if on sale"
          },
          "attributes": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Package attributes. Only included when using ?include=attributes parameter"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp"
          }
        }
      },
      "SubscriptionAvailableItem": {
        "type": "object",
        "properties": {
          "item_id": {
            "type": "string",
            "format": "uuid",
            "description": "Product ID of the available item"
          },
          "item_name": {
            "type": "string",
            "description": "Name of the available item"
          },
          "item_sku": {
            "type": "string",
            "description": "SKU of the available item"
          },
          "item_description": {
            "type": "string",
            "description": "Description of the available item"
          },
          "min_qty": {
            "type": "integer",
            "description": "Minimum quantity allowed"
          },
          "max_qty": {
            "type": "integer",
            "description": "Maximum quantity allowed"
          },
          "default_qty": {
            "type": "integer",
            "description": "Default quantity"
          },
          "sort_order": {
            "type": "integer",
            "description": "Display order"
          },
          "image": {
            "$ref": "#/components/schemas/ProductImage",
            "description": "Primary item image"
          },
          "collections": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Collection"
            },
            "description": "Collections this item belongs to"
          },
          "status": {
            "type": "string",
            "enum": ["active", "inactive", "out_of_stock"],
            "description": "Item availability status"
          },
          "attributes": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Item attributes"
          },
          "related_products": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Related products"
          }
        }
      },
      "CmsPage": {
        "type": "object",
        "properties": {
          "slug": {
            "type": "string",
            "description": "URL-friendly page identifier"
          },
          "name": {
            "type": "string",
            "description": "Page title/name"
          },
          "meta_title": {
            "type": "string",
            "description": "SEO meta title"
          },
          "meta_description": {
            "type": "string",
            "description": "SEO meta description"
          },
          "status": {
            "type": "string",
            "enum": ["published", "draft"],
            "description": "Page publication status"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp"
          },
          "published_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "Publication timestamp"
          }
        }
      },
      "CmsPageDetail": {
        "type": "object",
        "properties": {
          "slug": {
            "type": "string",
            "description": "URL-friendly page identifier"
          },
          "name": {
            "type": "string",
            "description": "Page title/name"
          },
          "content": {
            "type": "string",
            "description": "Page content/body"
          },
          "seo": {
            "type": "object",
            "properties": {
              "title": {
                "type": "string",
                "description": "SEO meta title"
              },
              "description": {
                "type": "string",
                "description": "SEO meta description"
              },
              "og_image": {
                "type": "string",
                "nullable": true,
                "description": "Open Graph image URL (1200x630)"
              }
            },
            "description": "SEO metadata"
          },
          "status": {
            "type": "string",
            "enum": ["published", "draft"],
            "description": "Page publication status"
          },
          "fields": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Custom fields as key-value pairs"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp"
          },
          "published_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "Publication timestamp"
          }
        }
      },
      "CmsCollection": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the collection"
          },
          "name": {
            "type": "string",
            "description": "Collection name"
          },
          "slug": {
            "type": "string",
            "description": "URL-friendly collection identifier"
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CmsItem"
            },
            "description": "Collection items sorted by order"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp"
          }
        }
      },
      "CmsItem": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the item"
          },
          "name": {
            "type": "string",
            "description": "Item name"
          },
          "content": {
            "type": "string",
            "description": "Item content (may contain HTML)"
          },
          "order": {
            "type": "integer",
            "description": "Display order within collection"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp"
          }
        }
      },
      "SearchResult": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the result"
          },
          "type": {
            "type": "string",
            "enum": ["product", "page", "collection", "event", "subscription_package"],
            "description": "Type of search result"
          },
          "title": {
            "type": "string",
            "description": "Title or name of the result"
          },
          "slug": {
            "type": "string",
            "description": "URL-friendly identifier"
          },
          "url": {
            "type": "string",
            "description": "URL to the result"
          },
          "excerpt": {
            "type": "string",
            "nullable": true,
            "description": "Brief excerpt or description"
          },
          "image": {
            "$ref": "#/components/schemas/ProductImage",
            "nullable": true,
            "description": "Associated image if available"
          },
          "price": {
            "type": "string",
            "nullable": true,
            "description": "Formatted price for product results"
          },
          "status": {
            "type": "string",
            "description": "Status of the result"
          }
        }
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "Authentication token for API access"
          },
          "isSubscriber": {
            "type": "boolean",
            "description": "Whether the user has an active subscription"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Error message"
          }
        },
        "required": ["message"]
      },
      "ValidationError": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Validation error message"
          },
          "errors": {
            "type": "object",
            "additionalProperties": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "Field-specific validation errors"
          }
        },
        "required": ["message", "errors"]
      }
    }
  },
  "servers": [
    {
      "url": "https://api.marzipan.co/v1"
    }
  ],
  "security": [
    {
      "tenantAuth": []
    }
  ],
  "tags": [
    {
      "name": "Account",
      "description": "Account management endpoints including registration, login, and user details"
    },
    {
      "name": "Carts",
      "description": "Shopping cart management endpoints"
    },
    {
      "name": "Products",
      "description": "Product catalog and search endpoints"
    },
    {
      "name": "Subscriptions",
      "description": "Subscription management and renewal endpoints"
    },
    {
      "name": "CMS",
      "description": "Content management system endpoints"
    },
    {
      "name": "Messaging",
      "description": "Message and communication endpoints"
    },
    {
      "name": "Search",
      "description": "Search functionality endpoints"
    }
  ],
  "paths": {
    "/account/register": {
      "parameters": [],
      "post": {
        "tags": ["Account"],
        "summary": "Register",
        "description": "Register a new user account with an email address. A verification email will be sent to complete the registration process.",
        "security": [
          {
            "tenantAuth": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  }
                }
              }
            }
          }
        }
      }
    },

    "/account/login": {
      "parameters": [],
      "post": {
        "tags": ["Account"],
        "summary": "Login",
        "description": "Authenticate a user with their email address and receive an authentication token for API access.",
        "security": [
          {
            "tenantAuth": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/account/logout": {
      "parameters": [],
      "post": {
        "tags": ["Account"],
        "summary": "Logout",
        "description": "Invalidate the current authentication token and log out the user from their session.",
        "security": [
          {
            "accountAuth": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        }
      }
    },
    "/account/password": {
      "parameters": [],
      "post": {
        "tags": ["Account"],
        "summary": "Password Reset",
        "description": "Request a password reset link to be sent to the user's email address. The user can use the link to set a new password.",
        "security": [
          {
            "tenantAuth": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "returnUrl": {
                    "type": "string",
                    "format": "uri"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/account/orders": {
      "parameters": [],
      "get": {
        "tags": ["Account"],
        "summary": "Orders",
        "description": "Retrieve a list of all orders associated with the authenticated user's account, including order status and payment information.",
        "security": [
          {
            "accountAuth": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {"type": "string"},
                          "ref": {"type": "string"},
                          "items": {"type": "integer"},
                          "amount": {"type": "string"},
                          "status": {"type": "string"},
                          "paymentStatus": {"type": "string"},
                          "createdAt": {"type": "string"}
                        }
                      }
                    }
                  }
                },
                "example": {
                  "data": [
                    {
                      "id": "73d5c504-adbb-43ac-891e-9b3dd4900de4",
                      "ref": "1010744",
                      "items": 2,
                      "amount": "£96.98",
                      "status": "processing",
                      "paymentStatus": "paid",
                      "createdAt": "2024-06-08T22:07:53.000000Z"
                    },
                    {
                      "id": "6326728d-05e1-4fc5-92fb-c40b5aa0e52f",
                      "ref": "1010961",
                      "items": 1,
                      "amount": "£9.99",
                      "status": "shipped",
                      "paymentStatus": "paid",
                      "createdAt": "2024-10-07T12:12:58.000000Z"
                    },
                    {
                      "id": "835152d7-a1a7-4aa1-941e-1114acae24df",
                      "ref": "1010985",
                      "items": 5,
                      "amount": "£281.89",
                      "status": "shipped",
                      "paymentStatus": "paid",
                      "createdAt": "2024-10-25T09:03:10.000000Z"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        }
      }
    },
    "/account/subscriptions": {
      "parameters": [],
      "get": {
        "tags": ["Account"],
        "summary": "Subscriptions",
        "description": "Get all active and inactive subscriptions for the authenticated user, including subscription details and renewal dates.",
        "security": [
          {
            "accountAuth": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {"type": "string"},
                          "subscriptionType": {"type": "string"},
                          "name": {"type": "string"},
                          "productId": {"type": "string"},
                          "price": {"type": "string"},
                          "status": {"type": "string"},
                          "startDate": {"type": "string"},
                          "endDate": {"type": "string"},
                          "renewalDate": {"type": "string"},
                          "billingInterval": {"type": "integer"}
                        }
                      }
                    }
                  }
                },
                "example": {
                  "data": [
                    {
                      "id": "1224f9ef-8caf-4564-9474-023f95819949",
                      "subscriptionType": "variable",
                      "name": "Discovery Club",
                      "productId": "084b80ef-d16d-4531-a25f-40b7ff4c744b",
                      "price": "£9.99",
                      "status": "active",
                      "startDate": "2024-10-07T12:12:58.000000Z",
                      "endDate": "2030-10-07T12:12:58.000000Z",
                      "renewalDate": "2025-01-07T12:12:58.000000Z",
                      "billingInterval": 3
                    },
                    {
                      "id": "feb40b5e-bde2-4494-a547-12f6ab368ca9",
                      "subscriptionType": "variable",
                      "name": "Premium Wine Selection",
                      "productId": "0b0210cb-5180-49b8-81f0-82ea693fcc37",
                      "price": "£24.99",
                      "status": "active",
                      "startDate": "2025-05-05T15:31:18.000000Z",
                      "endDate": "2031-05-05T15:31:18.000000Z",
                      "renewalDate": "2025-09-05T15:31:18.000000Z",
                      "billingInterval": 1
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        }
      }
    },
    "/account/details": {
      "parameters": [],
      "get": {
        "tags": ["Account"],
        "summary": "Details",
        "description": "Retrieve the authenticated user's account details including personal information and marketing preferences.",
        "security": [
          {
            "accountAuth": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "firstName": {"type": "string"},
                        "lastName": {"type": "string"},
                        "email": {"type": "string", "format": "email"},
                        "phone": {"type": "string"},
                        "marketing": {"type": "array", "items": {"type": "string"}}
                      }
                    }
                  }
                },
                "example": {
                  "data": {
                    "firstName": "Demo",
                    "lastName": "User",
                    "email": "demo@marzipan.uk",
                    "phone": "+44 7700 900123",
                    "marketing": []
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Account"],
        "summary": "Update details",
        "description": "Update the authenticated user's account information such as name and email address.",
        "security": [
          {
            "accountAuth": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstName": {
                    "type": "string"
                  },
                  "lastName": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/carts": {
      "parameters": [],
      "post": {
        "x-excluded": true,
        "tags": ["Carts"],
        "summary": "Create Cart",
        "description": "Create a new shopping cart session. The cart can be used to add items and proceed to checkout.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {"type": "string"},
                    "items": {"type": "array", "items": {"type": "object"}},
                    "total": {"type": "string"},
                    "createdAt": {"type": "string", "format": "date-time"}
                  }
                },
                "example": {
                  "id": "uuid",
                  "items": [],
                  "total": "£0.00",
                  "createdAt": "2025-01-01T00:00:00.000000Z"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"},
                    "errors": {"type": "object"}
                  }
                },
                "example": {
                  "message": "string",
                  "errors": {
                    "field.name": ["string"]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "item": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "title": {
                        "type": "string"
                      },
                      "options": {
                        "type": "object"
                      },
                      "price": {
                        "type": "integer"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/carts/{cartId}": {
      "parameters": [
        {
          "name": "cartId",
          "in": "path",
          "required": true,
          "description": "The unique identifier for the cart",
          "schema": {
            "type": "string",
            "format": "uuid"
          },
          "example": "893ff86d-4453-4134-9f62-5c9b7a70d74e"
        }
      ],
      "get": {
        "x-excluded": true,
        "tags": ["Carts"],
        "summary": "Get Cart",
        "description": "Retrieve the contents and details of a specific cart including all items, totals, and applied discounts.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        }
      },
      "put": {
        "x-excluded": true,
        "tags": ["Carts"],
        "summary": "Update Cart",
        "description": "Update cart details such as the customer email address associated with the cart.",
        "security": [
          {
            "tenantAuth": []
          }
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "x-excluded": true,
        "tags": ["Carts"],
        "summary": "Clear All Cart Items",
        "description": "Remove all items from the cart, effectively emptying it while keeping the cart session active.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        }
      }
    },
    "/carts/{cartId}/items": {
      "parameters": [
        {
          "name": "cartId",
          "in": "path",
          "required": true,
          "description": "The unique identifier for the cart",
          "schema": {
            "type": "string",
            "format": "uuid"
          },
          "example": "2ec7d69b-c40b-40fd-9f66-8e81130b5bb5"
        }
      ],
      "post": {
        "x-excluded": true,
        "tags": ["Carts"],
        "summary": "Add Item to Cart",
        "description": "Add one or more items to the cart with specified quantities and product types.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "quantity": {
                          "type": "integer"
                        },
                        "productType": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/carts/{cartId}/items/{itemId}": {
      "parameters": [
        {
          "name": "cartId",
          "in": "path",
          "required": true,
          "description": "The unique identifier for the cart",
          "schema": {
            "type": "string",
            "format": "uuid"
          },
          "example": "8bb107dd-4b10-4b19-ac7d-c88d21e49909"
        },
        {
          "name": "itemId",
          "in": "path",
          "required": true,
          "description": "The unique identifier for the cart item",
          "schema": {
            "type": "string",
            "format": "uuid"
          },
          "example": "39e460ed-c517-4bbc-b358-c05f8abcccca"
        }
      ],
      "put": {
        "x-excluded": true,
        "tags": ["Carts"],
        "summary": "Update Cart Item Quantity",
        "description": "Update the quantity of a specific item in the cart. Set quantity to zero to remove the item.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "quantity": {
                    "type": "integer"
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "x-excluded": true,
        "tags": ["Carts"],
        "summary": "Remove Cart Item",
        "description": "Remove a specific item from the cart completely regardless of quantity.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        }
      }
    },
    "/carts/{cartId}/discount": {
      "parameters": [
        {
          "name": "cartId",
          "in": "path",
          "required": true,
          "description": "The unique identifier for the cart",
          "schema": {
            "type": "string",
            "format": "uuid"
          },
          "example": "21047fd2-b068-41ed-b70c-1689af54368f"
        }
      ],
      "post": {
        "x-excluded": true,
        "tags": ["Carts"],
        "summary": "Apply Discount to Cart",
        "description": "Apply a discount code to the cart to receive promotional pricing or special offers.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "discountCode": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/carts/{cartId}/checkout": {
      "parameters": [
        {
          "name": "cartId",
          "in": "path",
          "required": true,
          "description": "The unique identifier for the cart",
          "schema": {
            "type": "string",
            "format": "uuid"
          },
          "example": "2beaa641-3076-49bc-a0f7-e91e7143e1f9"
        }
      ],
      "post": {
        "x-excluded": true,
        "tags": ["Carts"],
        "summary": "Checkout Cart",
        "description": "Process the cart for payment and convert it to an order. Supports multiple payment providers including PayPal.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "paymentProvider": {
                    "type": "string"
                  },
                  "paypal": {
                    "type": "object",
                    "properties": {
                      "payerId": {
                        "type": "string"
                      },
                      "orderId": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/carts/{cartId}/shippingMethods": {
      "parameters": [
        {
          "name": "cartId",
          "in": "path",
          "required": true,
          "description": "The unique identifier for the cart",
          "schema": {
            "type": "string",
            "format": "uuid"
          },
          "example": "43341d73-e9b5-4cd6-a35f-245e6c0e9aac"
        }
      ],
      "get": {
        "x-excluded": true,
        "tags": ["Carts"],
        "summary": "Get Cart Shipping Methods",
        "description": "Retrieve available shipping methods and rates for the items in the cart based on the destination.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        }
      }
    },
    "/carts/{cartId}/countries": {
      "parameters": [
        {
          "name": "cartId",
          "in": "path",
          "required": true,
          "description": "The unique identifier for the cart",
          "schema": {
            "type": "string",
            "format": "uuid"
          },
          "example": "2ec7d69b-c40b-40fd-9f66-8e81130b5bb5"
        }
      ],
      "get": {
        "x-excluded": true,
        "tags": ["Carts"],
        "summary": "Get Cart Countries",
        "description": "Get a list of countries available for shipping for the items in the current cart.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        }
      }
    },
    "/carts/{cartId}/createSetupIntent": {
      "parameters": [
        {
          "name": "cartId",
          "in": "path",
          "required": true,
          "description": "The unique identifier for the cart",
          "schema": {
            "type": "string",
            "format": "uuid"
          },
          "example": "d9c2f45b-f62f-4d60-8d1d-48929b662c6a"
        }
      ],
      "post": {
        "x-excluded": true,
        "tags": ["Carts"],
        "summary": "Create Cart Setup Intent",
        "description": "Create a payment setup intent for saving payment methods for future use with this cart.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        }
      }
    },
    "/cms/pages": {
      "parameters": [],
      "get": {
        "tags": ["CMS"],
        "summary": "Pages",
        "description": "Retrieve a list of all CMS pages including their metadata, status, and publication dates.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CmsPage"
                  }
                },
                "example": {
                  "data": [
                    {
                      "slug": "about-us",
                      "name": "About Us",
                      "metaTitle": "About Our Wine Collection",
                      "metaDescription": "Learn about our carefully curated wine selection and subscription services",
                      "status": "published",
                      "createdAt": "2024-01-15T10:30:00.000000Z",
                      "updatedAt": "2024-02-01T14:20:00.000000Z",
                      "publishedAt": "2024-01-15T10:30:00.000000Z"
                    },
                    {
                      "slug": "wine-guide",
                      "name": "Wine Guide",
                      "metaTitle": "Complete Wine Tasting Guide",
                      "metaDescription": "Your comprehensive guide to wine tasting, pairing, and appreciation",
                      "status": "published",
                      "createdAt": "2024-01-20T09:00:00.000000Z",
                      "updatedAt": "2024-01-25T16:45:00.000000Z",
                      "publishedAt": "2024-01-20T09:00:00.000000Z"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/cms/pages/{pageSlug}": {
      "parameters": [
        {
          "name": "pageSlug",
          "in": "path",
          "required": true,
          "description": "The unique slug identifier for the page",
          "schema": {
            "type": "string"
          },
          "example": "about-us"
        }
      ],
      "get": {
        "tags": ["CMS"],
        "summary": "Page",
        "description": "Get the full content and details of a specific CMS page by its slug identifier.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "CMS page details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CmsPageDetail"
                },
                "example": {
                  "slug": "about-us",
                  "name": "About Us",
                  "content": "<h1>About Our Wine Collection</h1><p>We are passionate about bringing you the finest wines from around the world. Our carefully curated selection includes premium vintages and exclusive discoveries that you won't find anywhere else.</p><p>Founded in 2020, our mission is to make exceptional wines accessible through our subscription service and expert recommendations.</p>",
                  "seo": {
                    "title": "About Our Wine Collection - Premium Wines & Subscriptions",
                    "description": "Learn about our carefully curated wine selection and subscription services. Discover premium vintages and exclusive wines delivered to your door.",
                    "ogImage": "https://marzipan-cloud-dev.b-cdn.net/1/ea9f0c5b-e517-4e24-99a1-90d40dcb1c79.jpg"
                  },
                  "status": "published",
                  "fields": {
                    "hero_image": "https://marzipan-cloud-dev.b-cdn.net/1/3bc26391-8cc1-4d20-a636-1c2ec55ef10d.jpg",
                    "team_photo": "https://marzipan-cloud-dev.b-cdn.net/1/0736c529-a33d-4b8c-8126-eb69779dcdad.jpg"
                  },
                  "createdAt": "2024-01-15T10:30:00.000000Z",
                  "updatedAt": "2024-02-01T14:20:00.000000Z",
                  "publishedAt": "2024-01-15T10:30:00.000000Z"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        }
      }
    },
    "/cms/collections/{collectionName}": {
      "parameters": [
        {
          "name": "collectionName",
          "in": "path",
          "required": true,
          "description": "The unique name identifier for the collection",
          "schema": {
            "type": "string"
          },
          "example": "faqs"
        }
      ],
      "get": {
        "tags": ["CMS"],
        "summary": "Collection",
        "description": "Retrieve all items from a specific CMS collection by its name.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "CMS collection with items",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CmsCollection"
                },
                "example": {
                  "id": "30ce94bf-230e-460e-97f8-c5807515c5d0",
                  "name": "FAQs",
                  "slug": "faqs",
                  "items": [
                    {
                      "id": "cbcb30f9-e88b-475b-a458-47380cdb6b10",
                      "name": "How do wine subscriptions work?",
                      "content": "Our wine subscriptions deliver carefully selected wines to your door on a regular basis. You can choose monthly, quarterly, or bi-annual deliveries. Each shipment includes tasting notes and information about the vineyard and winemaker.",
                      "order": 1,
                      "created_at": "2025-08-05T15:44:33.000000Z",
                      "updated_at": "2025-08-05T15:44:33.000000Z"
                    },
                    {
                      "id": "11faa766-21bc-4cb0-989d-7abb93a2a3e0",
                      "name": "Can I skip a delivery?",
                      "content": "Yes, you can skip any delivery up to 7 days before your next shipment date. Simply log into your account and manage your subscription settings. You can also pause your subscription for up to 3 months.",
                      "order": 2,
                      "created_at": "2025-08-05T15:44:33.000000Z",
                      "updated_at": "2025-08-05T15:44:33.000000Z"
                    },
                    {
                      "id": "bb28663d-d37b-469c-bad2-235c5a86d6a7",
                      "name": "What if I do not like a wine?",
                      "content": "We offer a satisfaction guarantee. If you are not happy with any wine in your shipment, contact us within 30 days and we will provide a credit or replacement. We want you to love every bottle!",
                      "order": 3,
                      "created_at": "2025-08-05T15:44:33.000000Z",
                      "updated_at": "2025-08-05T15:44:33.000000Z"
                    },
                    {
                      "id": "18e6da9f-86a4-43e1-8667-8a19aa5057f6",
                      "name": "Do you ship internationally?",
                      "content": "Currently we ship within the UK only. We are working on expanding to EU countries in 2025. UK shipping is free on all subscription orders and orders over £50.",
                      "order": 4,
                      "created_at": "2025-08-05T15:44:33.000000Z",
                      "updated_at": "2025-08-05T15:44:33.000000Z"
                    },
                    {
                      "id": "e58aef3b-fcea-4444-88b6-441ee059263f",
                      "name": "How do I cancel my subscription?",
                      "content": "You can cancel your subscription at any time through your account settings. There are no cancellation fees or commitments. If you cancel before your next billing date, you won't be charged for future shipments.",
                      "order": 5,
                      "created_at": "2025-08-05T15:44:33.000000Z",
                      "updated_at": "2025-08-05T15:44:33.000000Z"
                    }
                  ],
                  "created_at": "2025-08-05T15:44:33.000000Z",
                  "updated_at": "2025-08-05T15:44:33.000000Z"
                }
              }
            }
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        }
      }
    },
    "/products": {
      "parameters": [],
      "get": {
        "tags": ["Products"],
        "summary": "Products",
        "description": "Get a paginated list of all products with filtering and sorting options. Returns product details including pricing and availability.",
        "parameters": [
          {
            "name": "collection",
            "in": "query",
            "required": false,
            "description": "Filter products by collection slug or name. Products will be ordered by their position in the collection.",
            "schema": {
              "type": "string"
            },
            "example": "featured-products"
          },
          {
            "name": "attr",
            "in": "query",
            "required": false,
            "description": "Filter products by attributes using deep object notation. Each attribute filter accepts comma-separated values for OR matching.\n\nFormat: attr[attribute_slug]=value1,value2\n\nExample: attr[color]=red,blue&attr[size]=large\nThis returns products that are (red OR blue) AND large.",
            "schema": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "style": "deepObject",
            "explode": true,
            "example": {
              "color": "red,blue",
              "size": "large"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "required": false,
            "description": "Sort products by field and direction. Format: field.direction (e.g., price.asc, name.desc). Multiple sort options can be comma-separated.",
            "schema": {
              "type": "string"
            },
            "example": "price.asc,name.desc"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "description": "Limit the number of results returned. Maximum 50 per page.",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 50
            },
            "example": 10
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "description": "Page number for pagination.",
            "schema": {
              "type": "integer",
              "minimum": 1
            },
            "example": 1
          },
          {
            "name": "per_page",
            "in": "query",
            "required": false,
            "description": "Number of items per page. Default is 50.",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 50,
              "default": 50
            }
          },
          {
            "name": "include",
            "in": "query",
            "required": false,
            "description": "Comma-separated list of related resources to include in the response.\n\n Available options: linkedSubscriptions (includes full subscription details for products with linked subscriptions).",
            "schema": {
              "type": "string",
              "enum": ["linkedSubscriptions"]
            },
            "example": "linkedSubscriptions"
          }
        ],
        "responses": {
          "200": {
            "description": "products",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Product"
                      }
                    },
                    "links": {
                      "type": "object",
                      "properties": {
                        "first": {
                          "type": "string",
                          "format": "uri"
                        },
                        "last": {
                          "type": "string",
                          "format": "uri",
                          "nullable": true
                        },
                        "prev": {
                          "type": "string",
                          "format": "uri",
                          "nullable": true
                        },
                        "next": {
                          "type": "string",
                          "format": "uri",
                          "nullable": true
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "currentPage": {
                          "type": "integer"
                        },
                        "from": {
                          "type": "integer"
                        },
                        "path": {
                          "type": "string",
                          "format": "uri"
                        },
                        "perPage": {
                          "type": "integer"
                        },
                        "to": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                },
                "example": {
                  "data": [
                    {
                      "id": "2e2805a1-738e-4118-8a8b-f9431f0e210c",
                      "name": "Cellar Selection Malbec",
                      "slug": "cellar-selection-malbec-2015",
                      "description": "Id laboris ad aliqua exercitation dolore. Ad, aliqua exercitation dolore est culpa. Dolore est culpa id duis duis labore dolore do ex.",
                      "productType": "physical",
                      "sku": "CSMALBC2015",
                      "collection": "Store",
                      "status": "active",
                      "image": {
                        "id": "0736c529-a33d-4b8c-8126-eb69779dcdad",
                        "path": "1/0736c529-a33d-4b8c-8126-eb69779dcdad.jpg",
                        "src": "https://marzipan-cloud-dev.b-cdn.net/1/0736c529-a33d-4b8c-8126-eb69779dcdad.jpg",
                        "alt": "Cellar Selection Malbec 2015 bottle",
                        "mimeType": "image/jpeg",
                        "filename": "0736c529-a33d-4b8c-8126-eb69779dcdad.jpg"
                      },
                      "price": "£24.99",
                      "salePrice": null,
                      "subscriberPrice": null,
                      "createdAt": "2024-02-05T23:22:56.000000Z",
                      "updatedAt": "2024-02-05T23:22:56.000000Z",
                      "storeSlug": "store",
                      "subscriptionsSlug": null,
                      "availability": "all",
                      "upsellProducts": []
                    },
                    {
                      "id": "df0d13db-1332-4461-b3d1-b2774d47ff5f",
                      "name": "Chardonnay",
                      "slug": "chardonnay-2015",
                      "description": "Lorem sed id, culpa. Culpa id duis duis labore dolore do ex. Duis duis labore, dolore.",
                      "productType": "physical",
                      "sku": "CHARD2015",
                      "collection": "Store",
                      "status": "active",
                      "image": {
                        "id": "1b978a90-3ecb-4f37-b480-9fb81882176e",
                        "path": "1/1b978a90-3ecb-4f37-b480-9fb81882176e.jpg",
                        "src": "https://marzipan-cloud-dev.b-cdn.net/1/1b978a90-3ecb-4f37-b480-9fb81882176e.jpg",
                        "alt": "Chardonnay 2015 bottle",
                        "mimeType": "image/jpeg",
                        "filename": "1b978a90-3ecb-4f37-b480-9fb81882176e.jpg"
                      },
                      "price": "£23.99",
                      "salePrice": null,
                      "subscriberPrice": null,
                      "createdAt": "2024-02-05T23:22:56.000000Z",
                      "updatedAt": "2024-02-05T23:22:56.000000Z",
                      "storeSlug": "store",
                      "subscriptionsSlug": null,
                      "availability": "all",
                      "upsellProducts": []
                    },
                    {
                      "id": "084b80ef-d16d-4531-a25f-40b7ff4c744b",
                      "name": "Discovery Club",
                      "slug": "discovery-club",
                      "description": "Laborum adipiscing, tempor cillum. Cillum exercitation sed officia mollit do dolore.",
                      "productType": "subscription",
                      "sku": "DISCCLUB",
                      "collection": "Club",
                      "status": "active",
                      "image": {
                        "id": "bc1a0d61-e7f9-44d3-ae53-1475b5f9395d",
                        "path": "1/bc1a0d61-e7f9-44d3-ae53-1475b5f9395d.jpg",
                        "src": "https://marzipan-cloud-dev.b-cdn.net/1/bc1a0d61-e7f9-44d3-ae53-1475b5f9395d.jpg",
                        "alt": "Discovery Club subscription box",
                        "mimeType": "image/jpeg",
                        "filename": "bc1a0d61-e7f9-44d3-ae53-1475b5f9395d.jpg"
                      },
                      "price": "from £0.00",
                      "salePrice": null,
                      "subscriberPrice": null,
                      "createdAt": "2024-02-05T23:22:56.000000Z",
                      "updatedAt": "2024-02-05T23:22:56.000000Z",
                      "storeSlug": null,
                      "subscriptionsSlug": "club",
                      "availability": "all",
                      "upsellProducts": [],
                      "billing_frequency": 6,
                      "pricing_type": "per_item"
                    }
                  ],
                  "links": {
                    "first": "https://api.marzipan.co/v1/products?page=1",
                    "last": "https://api.marzipan.co/v1/products?page=5",
                    "prev": null,
                    "next": "https://api.marzipan.co/v1/products?page=2"
                  },
                  "meta": {
                    "currentPage": 1,
                    "from": 1,
                    "path": "https://api.marzipan.co/v1/products",
                    "perPage": 15,
                    "to": 15
                  }
                }
              }
            }
          }
        }
      }
    },
    "/products/{productId}": {
      "parameters": [
        {
          "name": "productId",
          "in": "path",
          "required": true,
          "description": "The unique identifier for the product",
          "schema": {
            "type": "string",
            "format": "uuid"
          },
          "example": "2e2805a1-738e-4118-8a8b-f9431f0e210c"
        }
      ],
      "get": {
        "tags": ["Products"],
        "summary": "Product",
        "description": "Retrieve detailed information about a specific product by its unique identifier.",
        "parameters": [
          {
            "name": "include",
            "in": "query",
            "required": false,
            "description": "Comma-separated list of related resources to include in the response. Available options: linkedSubscriptions (includes full subscription details for products with linked subscriptions).",
            "schema": {
              "type": "string",
              "enum": ["linkedSubscriptions"]
            },
            "example": "linkedSubscriptions"
          }
        ],
        "responses": {
          "200": {
            "description": "Product details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Product"
                },
                "example": {
                  "id": "2e2805a1-738e-4118-8a8b-f9431f0e210c",
                  "name": "Cellar Selection Malbec",
                  "slug": "cellar-selection-malbec-2015",
                  "url": "https://api.marzipan.co/products/cellar-selection-malbec-2015",
                  "description": "Id laboris ad aliqua exercitation dolore. Ad, aliqua exercitation dolore est culpa. Dolore est culpa, nostrud. Nostrud ad sed mollit, fugiat. Mollit fugiat, irure adipiscing ipsum id. Adipiscing ipsum id ea cillum deserunt, ipsum lorem.",
                  "product_type": "physical",
                  "sku": "CSMALBC2015",
                  "collections": [
                    {
                      "id": "885ea507-690b-4598-a8fc-095c0528be24",
                      "name": "Store",
                      "slug": "store",
                      "description": "Store collection"
                    }
                  ],
                  "status": "active",
                  "images": {
                    "product": [
                      {
                        "id": "0736c529-a33d-4b8c-8126-eb69779dcdad",
                        "path": "1/0736c529-a33d-4b8c-8126-eb69779dcdad.jpg",
                        "src": "https://marzipan-cloud-dev.b-cdn.net/1/0736c529-a33d-4b8c-8126-eb69779dcdad.jpg",
                        "alt": "Cellar Selection Malbec 2015 bottle",
                        "mimeType": "image/jpeg",
                        "filename": "0736c529-a33d-4b8c-8126-eb69779dcdad.jpg"
                      }
                    ],
                    "labels": {
                      "front": [],
                      "back": []
                    }
                  },
                  "primaryImage": {
                    "id": "0736c529-a33d-4b8c-8126-eb69779dcdad",
                    "path": "1/0736c529-a33d-4b8c-8126-eb69779dcdad.jpg",
                    "src": "https://marzipan-cloud-dev.b-cdn.net/1/0736c529-a33d-4b8c-8126-eb69779dcdad.jpg",
                    "alt": "Cellar Selection Malbec 2015 bottle",
                    "mimeType": "image/jpeg",
                    "filename": "0736c529-a33d-4b8c-8126-eb69779dcdad.jpg"
                  },
                  "price": "£24.99",
                  "salePrice": null,
                  "subscriberPrice": null,
                  "createdAt": "2024-02-05T23:22:56.000000Z",
                  "updatedAt": "2024-02-05T23:22:56.000000Z",
                  "store_slug": "store",
                  "subscriptions_slug": null,
                  "availability": "all",
                  "upsell_products": [],
                  "attributes": [],
                  "options": [],
                  "related_products": [],
                  "awards": [],
                  "reviews": [],
                  "meta_title": "Cellar Selection Malbec 2015",
                  "meta_description": "Cupidatat quis reprehenderit, exercitation quis cillum nulla do.",
                  "meta_image": null,
                  "store_name": "Wine Collection"
                }
              }
            }
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        }
      }
    },
    "/subscription-packages": {
      "parameters": [],
      "get": {
        "tags": ["Subscriptions"],
        "summary": "Packages",
        "description": "List all available subscription packages including pricing and subscription type information. Supports filtering and sorting similar to products endpoint.",
        "parameters": [
          {
            "name": "type",
            "in": "query",
            "required": false,
            "description": "Filter by subscription type (picknmix, variable)",
            "schema": {
              "type": "string",
              "enum": ["picknmix", "variable"]
            }
          },
          {
            "name": "collection",
            "in": "query",
            "required": false,
            "description": "Filter packages by collection slug or name",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "attr",
            "in": "query",
            "required": false,
            "description": "Filter packages by attributes using deep object notation",
            "schema": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "style": "deepObject",
            "explode": true
          },
          {
            "name": "sort",
            "in": "query",
            "required": false,
            "description": "Sort packages by field and direction (e.g., price.asc, name.desc)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "description": "Limit the number of results returned",
            "schema": {
              "type": "integer",
              "minimum": 1
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "description": "Page number for pagination",
            "schema": {
              "type": "integer",
              "minimum": 1
            }
          },
          {
            "name": "per_page",
            "in": "query",
            "required": false,
            "description": "Number of items per page",
            "schema": {
              "type": "integer",
              "minimum": 1
            }
          },
          {
            "name": "include",
            "in": "query",
            "required": false,
            "description": "Include additional data. Available: attributes, subscribers",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/SubscriptionPackageCollection"
                      }
                    },
                    "links": {
                      "type": "object",
                      "properties": {
                        "first": {
                          "type": "string",
                          "format": "uri"
                        },
                        "last": {
                          "type": "string",
                          "format": "uri",
                          "nullable": true
                        },
                        "prev": {
                          "type": "string",
                          "format": "uri",
                          "nullable": true
                        },
                        "next": {
                          "type": "string",
                          "format": "uri",
                          "nullable": true
                        }
                      }
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "currentPage": {
                          "type": "integer"
                        },
                        "from": {
                          "type": "integer"
                        },
                        "path": {
                          "type": "string",
                          "format": "uri"
                        },
                        "perPage": {
                          "type": "integer"
                        },
                        "to": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                },
                "example": {
                  "data": [
                    {
                      "id": "084b80ef-d16d-4531-a25f-40b7ff4c744b",
                      "subscriptionType": "variable",
                      "name": "Discovery Club",
                      "slug": "discovery-club",
                      "subscriptions_slug": "club",
                      "url": "https://api.marzipan.co/subscription-packages/discovery-club",
                      "description": "Laborum adipiscing, tempor cillum. Cillum exercitation sed officia mollit do dolore. Sed officia mollit do dolore do ex.",
                      "product_type": "subscription",
                      "sku": "DISCCLUB",
                      "collection": "Club",
                      "status": "active",
                      "image": {
                        "id": "bc1a0d61-e7f9-44d3-ae53-1475b5f9395d",
                        "path": "1/bc1a0d61-e7f9-44d3-ae53-1475b5f9395d.jpg",
                        "src": "https://marzipan-cloud-dev.b-cdn.net/1/bc1a0d61-e7f9-44d3-ae53-1475b5f9395d.jpg",
                        "alt": "Discovery Club subscription box",
                        "mimeType": "image/jpeg",
                        "filename": "bc1a0d61-e7f9-44d3-ae53-1475b5f9395d.jpg"
                      },
                      "price": {
                        "value": 0,
                        "formatted": "£0.00",
                        "currency": "GBP"
                      },
                      "salePrice": null,
                      "created_at": "2024-02-05T23:22:56.000000Z",
                      "updated_at": "2024-02-05T23:22:56.000000Z"
                    }
                  ],
                  "links": {
                    "first": "https://api.marzipan.co/v1/subscription-packages?page=1",
                    "last": "https://api.marzipan.co/v1/subscription-packages?page=1",
                    "prev": null,
                    "next": null
                  },
                  "meta": {
                    "currentPage": 1,
                    "from": 1,
                    "path": "https://api.marzipan.co/v1/subscription-packages",
                    "perPage": 15,
                    "to": 1
                  }
                }
              }
            }
          }
        }
      }
    },
    "/subscription-packages/{packageId}": {
      "parameters": [
        {
          "name": "packageId",
          "in": "path",
          "required": true,
          "description": "The unique identifier (UUID) or slug for the subscription package",
          "schema": {
            "type": "string"
          },
          "examples": {
            "uuid": {
              "value": "550e8400-e29b-41d4-a716-446655440000",
              "description": "Using a UUID"
            },
            "slug": {
              "value": "discovery-club",
              "description": "Using a slug"
            }
          }
        }
      ],
      "get": {
        "tags": ["Subscriptions"],
        "summary": "Package",
        "description": "Get detailed information about a specific subscription package by its unique identifier (UUID) or slug.",
        "parameters": [
          {
            "name": "include",
            "in": "query",
            "required": false,
            "description": "Include additional data. Available: subscribers",
            "schema": {
              "type": "string",
              "enum": ["subscribers"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Subscription package details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubscriptionPackage"
                },
                "example": {
                  "id": "084b80ef-d16d-4531-a25f-40b7ff4c744b",
                  "subscription_type": "variable",
                  "name": "Discovery Club",
                  "slug": "discovery-club",
                  "sku": "DISCCLUB",
                  "url": "https://api.marzipan.co/subscription-packages/discovery-club",
                  "status": "active",
                  "availability": "all",
                  "product_type": "subscription",
                  "description": "Laborum adipiscing, tempor cillum. Cillum exercitation sed officia mollit do dolore. Sed officia mollit do dolore do ex officia mollit. Mollit irure adipiscing ipsum id lorem sunt. Ipsum id lorem sunt dolore magna aliqua.",
                  "meta_title": "Discovery Club - Premium Wine Subscription",
                  "meta_description": "Join our Discovery Club and explore exceptional wines delivered monthly to your door.",
                  "collections": [
                    {
                      "id": "46759fdd-1b5b-4339-a175-af0569c1ca73",
                      "name": "Club",
                      "slug": "club",
                      "description": "Club products"
                    }
                  ],
                  "images": [
                    {
                      "id": "bc1a0d61-e7f9-44d3-ae53-1475b5f9395d",
                      "path": "1/bc1a0d61-e7f9-44d3-ae53-1475b5f9395d.jpg",
                      "src": "https://marzipan-cloud-dev.b-cdn.net/1/bc1a0d61-e7f9-44d3-ae53-1475b5f9395d.jpg",
                      "alt": "Discovery Club subscription box",
                      "mimeType": "image/jpeg",
                      "filename": "bc1a0d61-e7f9-44d3-ae53-1475b5f9395d.jpg"
                    }
                  ],
                  "primaryImage": {
                    "id": "bc1a0d61-e7f9-44d3-ae53-1475b5f9395d",
                    "path": "1/bc1a0d61-e7f9-44d3-ae53-1475b5f9395d.jpg",
                    "src": "https://marzipan-cloud-dev.b-cdn.net/1/bc1a0d61-e7f9-44d3-ae53-1475b5f9395d.jpg",
                    "alt": "Discovery Club subscription box",
                    "mimeType": "image/jpeg",
                    "filename": "bc1a0d61-e7f9-44d3-ae53-1475b5f9395d.jpg"
                  },
                  "price": {
                    "value": 0,
                    "formatted": "£0.00",
                    "currency": "GBP"
                  },
                  "salePrice": null,
                  "billing_frequency": 6,
                  "billing_frequencies": [1, 3, 6, 12],
                  "pricing_type": "per_item",
                  "auto_renew": true,
                  "minimum_items": 2,
                  "available_items": [
                    {
                      "item_id": "2e2805a1-738e-4118-8a8b-f9431f0e210c",
                      "item_name": "Cellar Selection Malbec",
                      "item_sku": "CSMALBC2015",
                      "item_description": "Premium Malbec with rich, full-bodied flavor profile",
                      "min_qty": 1,
                      "max_qty": 3,
                      "default_qty": 1,
                      "sort_order": 1,
                      "status": "active"
                    },
                    {
                      "item_id": "df0d13db-1332-4461-b3d1-b2774d47ff5f",
                      "item_name": "Chardonnay",
                      "item_sku": "CHARD2015",
                      "item_description": "Elegant white wine with crisp citrus notes",
                      "min_qty": 1,
                      "max_qty": 2,
                      "default_qty": 1,
                      "sort_order": 2,
                      "status": "active"
                    }
                  ],
                  "attributes": [],
                  "options": [],
                  "related_products": []
                }
              }
            }
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        }
      }
    },

    "/subscriptions/renew": {
      "parameters": [],
      "post": {
        "tags": ["Subscriptions"],
        "x-excluded": true,
        "summary": "Renew",
        "description": "Renew an existing subscription using a renewal token and signature. Used for subscription extensions and renewals.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success"
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "renewal": {
                    "type": "string"
                  },
                  "expires": {
                    "type": "string",
                    "format": "utc-millisec"
                  },
                  "signature": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/search": {
      "parameters": [],
      "get": {
        "tags": ["Search"],
        "summary": "Search",
        "description": "Search across products, pages, and other content using a query string. Returns relevant results based on the search term.",
        "parameters": [
          {
            "name": "query",
            "in": "query",
            "required": true,
            "description": "Search term to find matching content",
            "schema": {
              "type": "string",
              "minLength": 1
            },
            "example": "malbec"
          },
          {
            "name": "type",
            "in": "query",
            "required": false,
            "description": "Filter results by content type. If not specified, searches all types",
            "schema": {
              "type": "string",
              "enum": ["products", "pages", "collections", "events", "subscription_packages"]
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "description": "Maximum number of results to return per type",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 50,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "query": {
                      "type": "string",
                      "description": "The search query that was executed"
                    },
                    "total_results": {
                      "type": "integer",
                      "description": "Total number of results found across all types"
                    },
                    "results": {
                      "type": "object",
                      "properties": {
                        "products": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/SearchResult"
                          },
                          "description": "Product search results"
                        },
                        "pages": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/SearchResult"
                          },
                          "description": "Page search results"
                        },
                        "collections": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/SearchResult"
                          },
                          "description": "Collection search results"
                        },
                        "events": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/SearchResult"
                          },
                          "description": "Event search results"
                        },
                        "subscription_packages": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/SearchResult"
                          },
                          "description": "Subscription package search results"
                        }
                      },
                      "description": "Search results organized by content type"
                    }
                  }
                },
                "example": {
                  "query": "malbec",
                  "total_results": 3,
                  "results": {
                    "products": [
                      {
                        "id": "2e2805a1-738e-4118-8a8b-f9431f0e210c",
                        "type": "product",
                        "title": "Cellar Selection Malbec",
                        "slug": "cellar-selection-malbec-2015",
                        "url": "https://api.marzipan.co/products/cellar-selection-malbec-2015",
                        "excerpt": "Premium Malbec with rich, full-bodied flavor profile and notes of dark fruit",
                        "image": {
                          "id": "0736c529-a33d-4b8c-8126-eb69779dcdad",
                          "path": "1/0736c529-a33d-4b8c-8126-eb69779dcdad.jpg",
                          "src": "https://marzipan-cloud-dev.b-cdn.net/1/0736c529-a33d-4b8c-8126-eb69779dcdad.jpg",
                          "alt": "Cellar Selection Malbec 2015 bottle",
                          "mimeType": "image/jpeg",
                          "filename": "0736c529-a33d-4b8c-8126-eb69779dcdad.jpg"
                        },
                        "price": "£24.99",
                        "status": "active"
                      }
                    ],
                    "pages": [
                      {
                        "id": "page-wine-guide",
                        "type": "page",
                        "title": "Malbec Wine Guide",
                        "slug": "malbec-wine-guide",
                        "url": "https://api.marzipan.co/pages/malbec-wine-guide",
                        "excerpt": "Learn about Malbec wines, their origins, flavor profiles, and perfect food pairings",
                        "image": null,
                        "price": null,
                        "status": "published"
                      }
                    ],
                    "collections": [
                      {
                        "id": "885ea507-690b-4598-a8fc-095c0528be24",
                        "type": "collection",
                        "title": "Red Wine Collection",
                        "slug": "red-wines",
                        "url": "https://api.marzipan.co/collections/red-wines",
                        "excerpt": "Our carefully curated selection of premium red wines including Malbec, Cabernet, and more",
                        "image": {
                          "id": "1b978a90-3ecb-4f37-b480-9fb81882176e",
                          "src": "https://marzipan-cloud-dev.b-cdn.net/1/1b978a90-3ecb-4f37-b480-9fb81882176e.jpg",
                          "alt": "Red wine collection"
                        },
                        "price": null,
                        "status": "active"
                      }
                    ],
                    "events": [],
                    "subscription_packages": []
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthenticated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {"type": "string"}
                  }
                },
                "example": {
                  "message": "string"
                }
              }
            }
          }
        }
      }
    }
  }
}